(function(){"use strict";var t={1832:function(t,e,a){var n=a(9242),r=a(3396);const o={class:"content"};function s(t,e,a,n,s,i){const c=(0,r.up)("navbar"),u=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(c),(0,r._)("div",o,[(0,r.Wm)(u)])],64)}a(7658);var i=a.p+"img/logo.cfaed864.png";const c={class:"navbar"},u={class:"navbar__wrapper"},p=(0,r._)("img",{class:"navbar__logo",src:i,alt:"Logo"},null,-1),l=[p],h={class:"navbar__buttons"};function d(t,e,a,n,o,s){const i=(0,r.up)("custom-button");return(0,r.wg)(),(0,r.iD)("div",c,[(0,r._)("div",u,[(0,r._)("figure",{class:"navbar__logo-wrapper",onClick:e[0]||(e[0]=e=>t.$router.push("/"))},l),(0,r._)("div",h,[(0,r.Wm)(i,{class:"navbar__button-main",onClick:e[1]||(e[1]=e=>t.$router.push("/weather-app/"))},{default:(0,r.w5)((()=>[(0,r.Uk)("Main")])),_:1}),(0,r.Wm)(i,{class:"navbar__button-favorites",onClick:e[2]||(e[2]=e=>t.$router.push("/weather-app/favorites"))},{default:(0,r.w5)((()=>[(0,r.Uk)("Favorites")])),_:1})])])])}var m={name:"navbar"},v=a(89);const f=(0,v.Z)(m,[["render",d]]);var w=f,g={components:{Navbar:w}};const b=(0,v.Z)(g,[["render",s]]);var _=b;const y=t=>((0,r.dD)("data-v-0fb25d4e"),t=t(),(0,r.Cn)(),t),D={class:"main"},I={class:"search"},C={class:"search__wrapper"},O=y((()=>(0,r._)("div",{class:"f-button"},null,-1))),W={class:"main__wrapper"},k=y((()=>(0,r._)("div",{class:"weather-block"},null,-1))),T={class:"temperature-block"};function P(t,e,a,n,o,s){const i=(0,r.up)("autocomplete-input"),c=(0,r.up)("weather-graph");return(0,r.wg)(),(0,r.iD)("div",D,[(0,r._)("div",I,[(0,r._)("div",C,[(0,r.Wm)(i,{class:"search-input"}),O])]),(0,r._)("div",W,[k,(0,r._)("div",T,[(0,r.Wm)(c)])])])}const Z=t=>((0,r.dD)("data-v-bd6788b2"),t=t(),(0,r.Cn)(),t),x={class:"graph-wrapper"},$=Z((()=>(0,r._)("canvas",{id:"weather-graph"},null,-1))),j=[$];function F(t,e,a,n,o,s){return(0,r.wg)(),(0,r.iD)("div",x,j)}var V=a(8454),B=a(65),G={name:"weather-graph",data(){return{graphOptions:{type:"bar",data:{labels:[],datasets:[{label:"Temperature",data:[],backgroundColor:"#09f",borderColor:"transparent",borderWidth:3}]},options:{responsive:!0,lineTension:1,scales:{yAxes:[{ticks:{beginAtZero:!0,padding:0}}]},plugins:{legend:{align:"end"}}}}}},computed:{...(0,B.rn)({weatherData:t=>t.weather.weatherData}),...(0,B.Se)({city:"weather/city"}),listForecast(){return this.weatherData?.list?.splice(0,10)},listTemperatures(){return this.listForecast?.map((t=>Math.round(t.main.temp)))},listTemperatureTimes(){const t={hour:"numeric",minute:"numeric"};return this.listForecast?.map((e=>{let a=new Date(1e3*e.dt).toLocaleString("en-US",t);return console.log(a),`${a}`}))}},methods:{setGraphOptions(){this.graphOptions.data.datasets[0].data=this.listTemperatures,this.graphOptions.data.labels=this.listTemperatureTimes},initGraph(){const t=document.getElementById("weather-graph");new V.ZP(t,this.graphOptions)}},mounted(){setTimeout((()=>{this.setGraphOptions(),this.initGraph()}),1e3)}};const M=(0,v.Z)(G,[["render",F],["__scopeId","data-v-bd6788b2"]]);var S=M,H=a(7139);const U={class:"autocomplete"},A={key:0,class:"autocomplete__dropdown"},E=["onClick"];function L(t,e,a,n,o,s){const i=(0,r.up)("custom-input");return(0,r.wg)(),(0,r.iD)("div",U,[(0,r.Wm)(i,{ref:"autocompleteInput",class:"autocomplete__input",modelValue:n.searchTerm,"onUpdate:modelValue":e[0]||(e[0]=t=>n.searchTerm=t),placeholder:"Type city name ..."},null,8,["modelValue"]),n.searchCities.length>0?((0,r.wg)(),(0,r.iD)("ul",A,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.searchCities,(t=>((0,r.wg)(),(0,r.iD)("li",{class:"autocomplete__option",key:t,onClick:e=>s.selectCity(t)},(0,H.zw)(t),9,E)))),128))])):(0,r.kq)("",!0)])}var Y=a(4311),N=a(4870);function q(){const t=(0,N.iH)([]);let e=(0,N.iH)("");const a=async()=>{try{const e=await Y.Z.get("https://countriesnow.space/api/v0.1/countries/population/cities");t.value=e.data.data.map((t=>t.city))}catch(e){console.log(e)}},n=(0,r.Fl)((()=>""===e.value?[]:t.value.filter((t=>t.indexOf(e.value)>-1||t.toLowerCase().indexOf(e.value)>-1))));return(0,r.bv)(a),{searchTerm:e,searchCities:n}}var z={name:"autocomplete-input",data(){return{selectedCity:null}},methods:{selectCity(t){this.selectedCity=t,this.searchTerm=""}},setup(){const{searchTerm:t,searchCities:e}=q();return{searchTerm:t,searchCities:e}}};const K=(0,v.Z)(z,[["render",L],["__scopeId","data-v-5f9ea884"]]);var J=K,Q={components:{WeatherGraph:S,AutocompleteInput:J},data(){return{}},computed:{...(0,B.rn)({ipData:t=>t.ip.ipData,weatherData:t=>t.weather.weatherData}),...(0,B.Se)({city:"weather/city",todayWeather:"weather/todayWeather"})},methods:{...(0,B.OI)({}),...(0,B.nv)({fetchIP:"ip/fetchIP",fetchWeatherByIP:"weather/fetchWeatherByIP"})},async created(){await this.fetchIP(),await this.fetchWeatherByIP(this.ipData)}};const R=(0,v.Z)(Q,[["render",P],["__scopeId","data-v-0fb25d4e"]]);var X=R;function tt(t,e,a,n,r,o){return null}var et={};const at=(0,v.Z)(et,[["render",tt]]);var nt=at,rt=a(2483);const ot=[{path:"/weather-app/",component:X},{path:"/weather-app/favorites",component:nt}],st=(0,rt.p7)({history:(0,rt.PO)(),routes:ot});var it=st;const ct={state:()=>({ipData:null}),getters:{},mutations:{setIP(t,e){t.ipData=e}},actions:{async fetchIP({commit:t}){try{const e=await Y.Z.get("https://ipapi.co/json/");t("setIP",e.data)}catch(e){console.log(e)}}},namespaced:!0},ut={state:()=>({cnt:2,units:"metric",appid:"afd610eb48b6805bd69ff2d873ee4bf1",weatherData:null,todayWeather:null}),getters:{city(t){return`${t.weatherData?.city?.name}, ${t.weatherData?.city?.country}`},todayWeather(t){const e=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),a=new Date(e);return a.setDate(a.getDate()+1),t.weatherData?.list?.filter((t=>t.dt<Date.parse(a)/1e3))}},mutations:{setWeatherData(t,e){t.weatherData=e}},actions:{async fetchWeatherByIP({state:t,commit:e},a){try{const n=await Y.Z.get("https://api.openweathermap.org/data/2.5/forecast",{params:{lat:a.latitude,lon:a.longitude,units:t.units,appid:t.appid}});e("setWeatherData",n.data)}catch(n){console.log(n)}}},namespaced:!0};var pt=(0,B.MT)({modules:{ip:ct,weather:ut}});const lt={class:"button"};function ht(t,e,a,n,o,s){return(0,r.wg)(),(0,r.iD)("button",lt,[(0,r.WI)(t.$slots,"default",{},void 0,!0)])}var dt={name:"custom-button"};const mt=(0,v.Z)(dt,[["render",ht],["__scopeId","data-v-2409a554"]]);var vt=mt;const ft=["value"];function wt(t,e,a,n,o,s){return(0,r.wg)(),(0,r.iD)("input",{value:a.modelValue,onInput:e[0]||(e[0]=(...t)=>s.updateInput&&s.updateInput(...t)),type:"text"},null,40,ft)}var gt={name:"custom-input",props:{modelValue:[String,Number]},methods:{updateInput(t){this.$emit("update:modelValue",t.target.value)}}};const bt=(0,v.Z)(gt,[["render",wt],["__scopeId","data-v-886738c0"]]);var _t=bt,yt=[vt,_t];const Dt=(0,n.ri)(_);yt.forEach((t=>{Dt.component(t.name,t)})),Dt.use(pt).use(it).mount("#app")}},e={};function a(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,a),o.exports}a.m=t,function(){var t=[];a.O=function(e,n,r,o){if(!n){var s=1/0;for(p=0;p<t.length;p++){n=t[p][0],r=t[p][1],o=t[p][2];for(var i=!0,c=0;c<n.length;c++)(!1&o||s>=o)&&Object.keys(a.O).every((function(t){return a.O[t](n[c])}))?n.splice(c--,1):(i=!1,o<s&&(s=o));if(i){t.splice(p--,1);var u=r();void 0!==u&&(e=u)}}return e}o=o||0;for(var p=t.length;p>0&&t[p-1][2]>o;p--)t[p]=t[p-1];t[p]=[n,r,o]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.p="/weather-app/"}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var r,o,s=n[0],i=n[1],c=n[2],u=0;if(s.some((function(e){return 0!==t[e]}))){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(c)var p=c(a)}for(e&&e(n);u<s.length;u++)o=s[u],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(p)},n=self["webpackChunkweather_app"]=self["webpackChunkweather_app"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(1832)}));n=a.O(n)})();
//# sourceMappingURL=app.a8a58fad.js.map